const heroesData = [
    {
        id: 1,
        name: "Wonder Woman",
        shortDescription: "Wonder Woman es una superheroína del universo DC Comics, princesa de las Amazonas, con fuerza sobrehumana, habilidades de combate excepcionales y armas mágicas como el Lazo de la Verdad. Su nombre real es Diana y lucha por la justicia, la paz y la igualdad.",
        longDescription: "Wonder Woman es una de las superhéroes más icónicas del universo DC Comics y un símbolo mundial de poder, justicia y empoderamiento femenino. Su verdadero nombre es Diana, princesa de las Amazonas, una raza de mujeres guerreras inmortales que habitan en la isla mística de Themyscira. Fue creada por William Moulton Marston y debutó en 1941 en All Star Comics #8. Diana fue moldeada del barro por su madre, la reina Hipólita, y recibió vida y poderes de los dioses del Olimpo. Entre sus habilidades destacan su fuerza sobrehumana, velocidad, agilidad, resistencia, y su maestría en combate cuerpo a cuerpo. Además, posee armas mágicas como el Lazo de la Verdad, que obliga a decir la verdad a quien atrape, los brazaletes indestructibles que desvían proyectiles, y en algunas versiones, una tiara que puede usar como arma. Wonder Woman sale de su isla para ayudar al mundo de los humanos durante tiempos de crisis, decidida a ser un puente entre la humanidad y las Amazonas. A lo largo de sus historias, ha sido miembro clave de la Liga de la Justicia, luchando junto a héroes como Batman y Superman. Su misión es promover la paz, la igualdad y la justicia, enfrentándose tanto a enemigos sobrenaturales como a la corrupción del mundo moderno.",
        imageUrl: "/images/wonder_woman.jpg",
        detailImageUrl: "/images/wonder_woman.jpg"
    },
    {
        id: 2,
        name: "Batman",
        shortDescription: "Batman es un superhéroe de DC Comics, también conocido como Bruce Wayne, un millonario que combate el crimen en Gotham City usando su inteligencia, habilidades de combate y tecnología avanzada, sin poseer superpoderes.",
        longDescription: "Batman, también conocido como Bruce Wayne, es uno de los superhéroes más emblemáticos y complejos del universo DC Comics. Creado por Bob Kane y Bill Finger, apareció por primera vez en Detective Comics #27 en 1939. A diferencia de muchos superhéroes, Batman no posee superpoderes; en cambio, se basa en su intelecto brillante, entrenamiento físico intensivo, habilidades de detective y una tecnología avanzada para combatir el crimen. La historia de origen de Batman comienza con una tragedia: cuando era niño, Bruce presenció el asesinato de sus padres, Thomas y Martha Wayne, durante un asalto en un callejón de Gotham City. Este evento traumático marcó su vida y lo llevó a jurar una cruzada personal contra el crimen. Con el tiempo, Bruce se entrena en artes marciales, criminología, ciencia forense y múltiples disciplinas físicas e intelectuales, preparando su cuerpo y mente para convertirse en un símbolo que inspire miedo a los criminales: el Murciélago. Batman opera principalmente en Gotham City, una ciudad ficticia sumida en la corrupción, el crimen organizado y la decadencia social. Trabaja desde su cuartel secreto, la Batcueva, situada bajo la mansión Wayne, y utiliza una gama de gadgets, vehículos (como el Batimóvil) y herramientas tecnológicas para cumplir su misión. Entre sus aliados se encuentran Alfred Pennyworth (su fiel mayordomo y figura paterna), Robin (su compañero en distintas encarnaciones), y Comisionado Gordon, de la policía de Gotham. Sus enemigos, conocidos como algunos de los villanos más icónicos del cómic, incluyen al Joker, Harley Quinn, Dos Caras, El Pingüino, El Acertijo, Bane, y Ra’s al Ghul, entre otros. Cada uno representa distintos aspectos de la locura, la moralidad y el caos, temas recurrentes en las historias de Batman. Además de su rol como vigilante solitario, Batman es un miembro clave de la Liga de la Justicia, aportando estrategia, liderazgo y recursos. Su personalidad sombría, su enfoque en la justicia y su constante lucha interna entre venganza y moralidad lo convierten en un personaje profundo y fascinante. A lo largo de los años, Batman ha trascendido los cómics para convertirse en un ícono cultural global, protagonizando exitosas adaptaciones en televisión, cine, videojuegos y novelas gráficas. Representa la idea de que, incluso sin poderes, una persona puede marcar una diferencia monumental si está dispuesta a enfrentarse a la oscuridad con determinación y coraje.",
        imageUrl: "/images/batman.jpg",
        detailImageUrl: "/images/batman.jpg"
    },
    {
        id: 3,
        name: "Capitan America",
        shortDescription: "Capitán América es un superhéroe de Marvel Comics, cuyo nombre real es Steve Rogers, un soldado mejorado con suero de súper soldado que lucha por la justicia con fuerza, agilidad y un escudo indestructible como arma principal.",
        longDescription: "Capitán América, cuyo nombre real es Steve Rogers, es uno de los superhéroes más representativos del universo Marvel Comics y un símbolo viviente del patriotismo, el coraje y los valores heroicos. Fue creado por Joe Simon y Jack Kirby, y debutó en Captain America Comics #1 en 1941, en plena Segunda Guerra Mundial. Su imagen, vestido con los colores de la bandera estadounidense y portando un escudo indestructible, se convirtió rápidamente en un ícono cultural y propagandístico de la época. La historia de Steve Rogers comienza como la de un joven débil y enfermizo que, pese a sus limitaciones físicas, tiene un fuerte sentido del deber y desea alistarse en el ejército para luchar contra los nazis. Debido a su frágil salud, es rechazado repetidamente, pero se le ofrece la oportunidad de participar en un experimento militar llamado el Proyecto Renacimiento. Este experimento le otorga un suero especial que transforma su cuerpo, llevándolo al pico de la perfección humana en fuerza, agilidad, resistencia y reflejos. Así nace el Capitán América: no solo un soldado mejorado físicamente, sino un hombre con un fuerte código moral, dispuesto a sacrificarse por los demás y luchar por la libertad. Durante la guerra, lidera misiones junto al escuadrón conocido como los Howling Commandos, y forma un fuerte vínculo con su compañero Bucky Barnes. Al final del conflicto, Steve queda congelado en el hielo tras una misión y es dado por muerto, hasta que décadas más tarde es descubierto y revivido por los Vengadores en la era moderna. Despertar en un mundo totalmente distinto al que conocía pone a prueba sus creencias y su capacidad de adaptación. A pesar del choque cultural y temporal, Steve se convierte en uno de los líderes fundamentales de los Vengadores, guiando al equipo con su experiencia, sentido del deber y ejemplo moral. Su arma principal es su escudo circular de vibranium, que usa tanto para defenderse como para atacar, y que simboliza protección, justicia y defensa de los inocentes. A lo largo de los años, el Capitán América ha enfrentado múltiples amenazas, tanto globales como personales, incluyendo a enemigos como Cráneo Rojo, Hydra, y otras organizaciones que representan el autoritarismo y la corrupción. Su historia ha sido también una reflexión sobre los ideales americanos, el precio del heroísmo y el conflicto entre la obediencia a la autoridad y la fidelidad a los principios éticos. Además de su presencia en los cómics, el Capitán América ha ganado enorme popularidad gracias a sus adaptaciones cinematográficas dentro del Universo Cinematográfico de Marvel (MCU), interpretado por Chris Evans. En estas películas, Steve Rogers se convierte en uno de los personajes más admirados, con arcos narrativos que abordan temas como la guerra, la lealtad, el sacrificio y la lucha por la verdad, incluso cuando va en contra del sistema.",
        imageUrl: "/images/capitan_america.jpg",
        detailImageUrl: "/images/capitan_america.jpg"
    },
    {
        id: 4,
        name: "Iron Man",
        shortDescription: "Iron Man es un superhéroe de Marvel Comics, alter ego del genio millonario Tony Stark, que combate el crimen usando una armadura tecnológica avanzada equipada con armas y sistemas de vuelo.",
        longDescription: "Iron Man, cuyo nombre real es Tony Stark, es uno de los superhéroes más complejos, carismáticos y populares del universo Marvel Comics. Creado por Stan Lee, Larry Lieber, Don Heck y Jack Kirby, hizo su primera aparición en Tales of Suspense #39 en 1963. Desde su debut, Iron Man ha evolucionado hasta convertirse en un ícono no solo del mundo de los cómics, sino también del cine y la cultura popular, principalmente por su papel como uno de los miembros fundadores de los Vengadores y por la interpretación de Robert Downey Jr. en el Universo Cinematográfico de Marvel (MCU).",
        imageUrl: "/images/ironman.jpg",
        detailImageUrl: "/images/ironman.jpg"
    },
    {
        id: 5,
        name: "Ghost Rider",
        shortDescription: "Ghost Rider es un antihéroe de Marvel Comics, un motociclista poseído por un espíritu vengador que lo transforma en un esqueleto en llamas con poderes sobrenaturales, como el látigo infernal y la mirada de penitencia.",
        longDescription: "Ghost Rider es un antihéroe de Marvel Comics, cuyo alter ego más famoso es Johnny Blaze, un motociclista que vende su alma al demonio Mephisto para salvar a su padre adoptivo, solo para ser maldito y transformado en el vengador infernal conocido como Ghost Rider. Cada vez que la justicia lo requiere, Johnny se convierte en una criatura sobrenatural con una calavera en llamas y un poder imparable. Entre sus habilidades destacan su fuerza sobrehumana, la capacidad de regenerarse, la mirada de penitencia que obliga a las personas a enfrentar sus pecados y el látigo infernal. A pesar de ser una entidad demoníaca, Johnny lucha constantemente contra la maldición que lo consume, buscando redención y enfrentándose a seres malignos, demoníacos y su propio sufrimiento interno. Aunque Johnny Blaze es la encarnación más conocida, otros personajes como Danny Ketch y Robbie Reyes también han tomado el manto de Ghost Rider. A lo largo de los cómics y películas, Ghost Rider se ha convertido en un símbolo de justicia y sacrificio, con su historia de lucha contra el mal y el destino que lo atormenta.",
        imageUrl: "/images/ghost_rider.jpg",
        detailImageUrl: "/images/ghost_rider.jpg"
    },
    {
        id: 6,
        name: "Spider Man",
        shortDescription: "Spider-Man es un superhéroe de Marvel Comics, alter ego de Peter Parker, un joven con poderes arácnidos como trepar muros, fuerza mejorada y lanzar telarañas, que lucha contra el crimen guiado por el lema: Un gran poder conlleva una gran responsabilidad.",
        longDescription: "Spider-Man (Peter Parker) es uno de los superhéroes más icónicos de Marvel Comics, creado por Stan Lee y Steve Ditko. Tras ser mordido por una araña radiactiva, Peter adquiere habilidades sobrehumanas, como fuerza, agilidad, un sentido arácnido que le alerta del peligro y la capacidad de trepar paredes. Después de la muerte de su tío Ben, quien le enseña que con gran poder viene una gran responsabilidad, Peter adopta la identidad de Spider-Man y jura proteger a los inocentes. A pesar de sus habilidades, Peter enfrenta numerosos desafíos en su vida personal, luchando por equilibrar su identidad secreta como superhéroe con su vida como joven estudiante y sus relaciones con amigos y familiares, como su tía May y su amor, Mary Jane Watson. Spider-Man tiene una galería de villanos muy rica, incluyendo al Duende Verde, Doctor Octopus, Venom y muchos más. Su historia se ha expandido a través de cómics, películas, series de televisión y videojuegos, consolidándose como un símbolo de perseverancia y responsabilidad.",
        imageUrl: "/images/spiderman.jpg",
        detailImageUrl: "/images/spiderman.jpg"
    }
];

class HeroCard extends HTMLElement {
    constructor() {
        super();
        this.attachShadow({ mode: 'open' });
    }
    
    connectedCallback() {
        this.render();
    }
    
    static get observedAttributes() {
        return ['name', 'image', 'description', 'hero-id'];
    }
    
    attributeChangedCallback(name, oldValue, newValue) {
        if (this.shadowRoot.querySelector('.hero-card')) {
            this.render();
        }
    }
    
    render() {
        const name = this.getAttribute('name') || '';
        const image = this.getAttribute('image') || '';
        const description = this.getAttribute('description') || '';
        const heroId = this.getAttribute('hero-id') || '';
        
        this.shadowRoot.innerHTML = `
            <style>
                .hero-card {
                    width: 300px;
                    background-color: white;
                    border-radius: 10px;
                    overflow: hidden;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                    transition: transform 0.3s, box-shadow 0.3s;
                }
                
                .hero-card:hover {
                    transform: translateY(-10px);
                    box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
                }
                
                .hero-image {
                    width: 100%;
                    height: 350px;
                    object-fit: cover;
                }
                
                .hero-content {
                    padding: 1.5rem;
                }
                
                .hero-name {
                    font-size: 1.5rem;
                    color: #2c3e50;
                    margin-bottom: 0.8rem;
                }
                
                .hero-short-desc {
                    font-size: 1rem;
                    color: #7f8c8d;
                    margin-bottom: 1.5rem;
                    line-height: 1.5;
                }
                
                .details-button {
                    background-color: #3498db;
                    color: white;
                    border: none;
                    padding: 0.8rem 1.5rem;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                    transition: background-color 0.3s;
                    width: 100%;
                    font-size: 1rem;
                }
                
                .details-button:hover {
                    background-color: #2980b9;
                }
            </style>
            
            <div class="hero-card">
                <img class="hero-image" src="${image}" alt="${name}">
                <div class="hero-content">
                    <h2 class="hero-name">${name}</h2>
                    <p class="hero-short-desc">${description}</p>
                    <button class="details-button" data-hero-id="${heroId}">Ver más detalles</button>
                </div>
            </div>
        `;
        
        this.shadowRoot.querySelector('.details-button').addEventListener('click', () => {
            this.showDetails(heroId);
        });
    }
    
    showDetails(heroId) {
        const hero = heroesData.find(h => h.id === parseInt(heroId));
        if (hero) {
            document.getElementById('heroesContainer').style.display = 'none';
            
            const detailsSection = document.getElementById('heroDetails');
            document.getElementById('detailImage').src = hero.detailImageUrl;
            document.getElementById('detailName').textContent = hero.name;
            document.getElementById('detailDescription').textContent = hero.longDescription;
            
            detailsSection.style.display = 'block';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
}

customElements.define('hero-card', HeroCard);

function initializeGallery() {
    const container = document.getElementById('heroesContainer');
    
    heroesData.forEach(hero => {
        const template = document.getElementById('hero-card-template');
        const heroCardClone = template.content.cloneNode(true);
        const heroCard = heroCardClone.querySelector('hero-card');
        
        heroCard.setAttribute('name', hero.name);
        heroCard.setAttribute('image', hero.imageUrl);
        heroCard.setAttribute('description', hero.shortDescription);
        heroCard.setAttribute('hero-id', hero.id);
        
        container.appendChild(heroCard);
    });
    
    document.getElementById('backButton').addEventListener('click', () => {
        document.getElementById('heroDetails').style.display = 'none';
        document.getElementById('heroesContainer').style.display = 'flex';
        document.getElementById('noResults').style.display = 'none';
    });

     setupSearch();
}

function renderHeroes(heroes) {
    const container = document.getElementById('heroesContainer');
    container.innerHTML = ''; // Limpiar el contenedor
    
    if (heroes.length === 0) {
        document.getElementById('noResults').style.display = 'block';
        return;
    }
    
    document.getElementById('noResults').style.display = 'none';
    
    heroes.forEach(hero => {
        const template = document.getElementById('hero-card-template');
        const heroCardClone = template.content.cloneNode(true);
        const heroCard = heroCardClone.querySelector('hero-card');
        
        heroCard.setAttribute('name', hero.name);
        heroCard.setAttribute('image', hero.imageUrl);
        heroCard.setAttribute('description', hero.shortDescription);
        heroCard.setAttribute('hero-id', hero.id);
        
        container.appendChild(heroCard);
    });
}

function setupSearch() {
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    
    function performSearch() {
        const searchTerm = searchInput.value.trim().toLowerCase();
        
        if (searchTerm === '') {
            renderHeroes(heroesData);
            return;
        }
        
        const filteredHeroes = heroesData.filter(hero => 
            hero.name.toLowerCase().includes(searchTerm) || 
            hero.shortDescription.toLowerCase().includes(searchTerm) ||
            hero.longDescription.toLowerCase().includes(searchTerm)
        );
        
        renderHeroes(filteredHeroes);
    }
    
    searchButton.addEventListener('click', performSearch);
    
    searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });
}

document.addEventListener('DOMContentLoaded', initializeGallery);